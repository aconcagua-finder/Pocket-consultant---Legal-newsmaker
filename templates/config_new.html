<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öôÔ∏è NEWSMAKER Control Panel</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f3f4f6;
            --glass: rgba(255, 255, 255, 0.95);
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* –ü—Ä–æ—Ñ–∏–ª–∏ */
        .profile-bar {
            background: var(--glass);
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .profile-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .profile-selector select {
            padding: 8px 15px;
            border-radius: 8px;
            border: 2px solid var(--primary);
            font-size: 14px;
            background: white;
            cursor: pointer;
        }
        
        .profile-actions {
            display: flex;
            gap: 10px;
        }
        
        .profile-actions button {
            padding: 8px 15px;
            border-radius: 8px;
            border: none;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-secondary {
            background: var(--dark);
            color: white;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            background: var(--glass);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .header p {
            color: var(--dark);
            opacity: 0.7;
        }
        
        /* –¢–∞–±—ã */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--light);
            padding-bottom: 10px;
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: transparent;
            border: none;
            color: var(--dark);
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s;
            border-radius: 8px 8px 0 0;
        }
        
        .tab-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* –§–æ—Ä–º—ã */
        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            background: var(--light);
            border-radius: 12px;
        }
        
        .form-section h3 {
            margin-bottom: 20px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .help-text {
            margin-top: 5px;
            font-size: 12px;
            color: #6b7280;
        }
        
        /* –ß–µ–∫–±–æ–∫—Å */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification.success {
            background: #d1fae5;
            color: #047857;
        }
        
        .notification.error {
            background: #fee2e2;
            color: #b91c1c;
        }
        
        .notification.warning {
            background: #fed7aa;
            color: #c2410c;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            margin-bottom: 20px;
        }
        
        .modal-header h3 {
            color: var(--dark);
        }
        
        .modal-footer {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        /* –î–µ–π—Å—Ç–≤–∏—è */
        .actions {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            padding: 15px 25px;
            border-radius: 10px;
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .profile-bar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .actions {
                bottom: 20px;
                right: 20px;
                left: 20px;
                flex-direction: column;
            }
            
            .action-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ü–∞–Ω–µ–ª—å –ø—Ä–æ—Ñ–∏–ª–µ–π -->
        <div class="profile-bar">
            <div class="profile-selector">
                <i class="fas fa-user-circle" style="font-size: 24px; color: var(--primary);"></i>
                <label><strong>–ü—Ä–æ—Ñ–∏–ª—å:</strong></label>
                <select id="profileSelect">
                    <option value="Pocket Consultant">Pocket Consultant</option>
                </select>
            </div>
            <div class="profile-actions">
                <button class="btn-primary" onclick="loadProfile()">
                    <i class="fas fa-download"></i> –ó–∞–≥—Ä—É–∑–∏—Ç—å
                </button>
                <button class="btn-success" onclick="saveProfile()">
                    <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                </button>
                <button class="btn-secondary" onclick="showNewProfileModal()">
                    <i class="fas fa-plus"></i> –ù–æ–≤—ã–π
                </button>
                <button class="btn-secondary" onclick="duplicateProfile()">
                    <i class="fas fa-copy"></i> –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å
                </button>
                <button class="btn-danger" onclick="deleteProfile()">
                    <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å
                </button>
            </div>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="main-content">
            <div class="header">
                <h1>üöÄ NEWSMAKER Control Panel</h1>
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ –±–æ—Ç–∞</p>
            </div>
            
            <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
            <div id="notifications"></div>
            
            <!-- –¢–∞–±—ã -->
            <div class="tabs">
                <button class="tab-btn active" data-tab="api">
                    <i class="fas fa-plug"></i> API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
                <button class="tab-btn" data-tab="schedule">
                    <i class="fas fa-clock"></i> –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                </button>
                <button class="tab-btn" data-tab="content">
                    <i class="fas fa-file-alt"></i> –ö–æ–Ω—Ç–µ–Ω—Ç
                </button>
                <button class="tab-btn" data-tab="prompts">
                    <i class="fas fa-comment-dots"></i> –ü—Ä–æ–º–ø—Ç—ã
                </button>
                <button class="tab-btn" data-tab="keys">
                    <i class="fas fa-key"></i> API –∫–ª—é—á–∏
                </button>
            </div>
            
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Ç–∞–±–æ–≤ -->
            <div class="tab-content active" id="api-tab">
                <!-- Perplexity –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                <div class="form-section">
                    <h3><i class="fas fa-brain"></i> Perplexity API</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>–ú–æ–¥–µ–ª—å</label>
                            <select id="perplexity-model">
                                <option value="sonar">Sonar</option>
                                <option value="sonar-pro">Sonar Pro</option>
                                <option value="sonar-reasoning">Sonar Reasoning</option>
                                <option value="sonar-reasoning-pro">Sonar Reasoning Pro</option>
                                <option value="sonar-deep-research" selected>Sonar Deep Research</option>
                            </select>
                            <div class="help-text">Deep Research –ª—É—á—à–µ –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞</div>
                        </div>
                        <div class="form-group">
                            <label>Max Tokens</label>
                            <input type="number" id="perplexity-max-tokens" value="8192" min="1" max="200000">
                            <div class="help-text">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞ (–¥–æ 200K –¥–ª—è Sonar Pro)</div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Temperature</label>
                            <input type="number" id="perplexity-temperature" value="0.7" min="0" max="2" step="0.1">
                            <div class="help-text">–ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ (0 - —Ç–æ—á–Ω—ã–µ, 2 - –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ)</div>
                        </div>
                        <div class="form-group">
                            <label>Top P</label>
                            <input type="number" id="perplexity-top-p" value="0.9" min="0" max="1" step="0.1">
                            <div class="help-text">Nucleus sampling (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 0.9)</div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Presence Penalty</label>
                            <input type="number" id="perplexity-presence-penalty" value="0" min="-2" max="2" step="0.1">
                            <div class="help-text">–°–Ω–∏–∂–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—ã —Ç–µ–º (-2 –¥–æ 2)</div>
                        </div>
                        <div class="form-group">
                            <label>Frequency Penalty</label>
                            <input type="number" id="perplexity-frequency-penalty" value="0" min="-2" max="2" step="0.1">
                            <div class="help-text">–°–Ω–∏–∂–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—ã —Å–ª–æ–≤ (-2 –¥–æ 2)</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>–§–∏–ª—å—Ç—Ä –¥–æ–º–µ–Ω–æ–≤ (–æ–¥–∏–Ω –Ω–∞ —Å—Ç—Ä–æ–∫—É)</label>
                        <textarea id="perplexity-domains" rows="3" placeholder="example.com&#10;news.com"></textarea>
                        <div class="help-text">–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–æ–∏—Å–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏</div>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="perplexity-citations" checked>
                        <label for="perplexity-citations">–í–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏</label>
                    </div>
                </div>
                
                <!-- OpenAI –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                <div class="form-section">
                    <h3><i class="fas fa-image"></i> OpenAI Image Generation</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>–ú–æ–¥–µ–ª—å</label>
                            <select id="openai-model" onchange="updateOpenAIOptions()">
                                <option value="dall-e-2">DALL-E 2</option>
                                <option value="dall-e-3" selected>DALL-E 3</option>
                                <option value="gpt-image-1">GPT-Image-1 (–¥–æ 4096x4096)</option>
                            </select>
                            <div class="help-text">GPT-Image-1 - –Ω–æ–≤–µ–π—à–∞—è –º–æ–¥–µ–ª—å —Å –≤—ã—Å–æ–∫–∏–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º</div>
                        </div>
                        <div class="form-group">
                            <label>–†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                            <select id="openai-size">
                                <option value="1024x1024">1024x1024</option>
                                <option value="1024x1792">1024x1792</option>
                                <option value="1792x1024">1792x1024</option>
                            </select>
                            <div class="help-text">–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>–ö–∞—á–µ—Å—Ç–≤–æ</label>
                            <select id="openai-quality">
                                <option value="standard">Standard</option>
                                <option value="hd">HD (DALL-E 3)</option>
                            </select>
                            <div class="help-text">HD - –ª—É—á—à–µ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è, –Ω–æ –¥–æ—Ä–æ–∂–µ</div>
                        </div>
                        <div class="form-group">
                            <label>–°—Ç–∏–ª—å</label>
                            <select id="openai-style">
                                <option value="vivid">Vivid (—è—Ä–∫–∏–π)</option>
                                <option value="natural">Natural (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π)</option>
                            </select>
                            <div class="help-text">Vivid - –±–æ–ª–µ–µ –¥—Ä–∞–º–∞—Ç–∏—á–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="schedule-tab">
                <div class="form-section">
                    <h3><i class="fas fa-calendar-alt"></i> –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–π</h3>
                    <div class="form-group">
                        <label>–í—Ä–µ–º—è —Å–±–æ—Ä–∞ –Ω–æ–≤–æ—Å—Ç–µ–π</label>
                        <input type="time" id="collection-time" value="08:30">
                        <div class="help-text">–í—Ä–µ–º—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –Ω–æ–≤–æ—Å—Ç–µ–π (–ú–°–ö)</div>
                    </div>
                    <div class="form-group">
                        <label>–í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–π (7 —Å–ª–æ—Ç–æ–≤)</label>
                        <div class="form-row">
                            <input type="time" id="pub-time-1" value="09:05">
                            <input type="time" id="pub-time-2" value="11:03">
                            <input type="time" id="pub-time-3" value="13:07">
                            <input type="time" id="pub-time-4" value="15:09">
                        </div>
                        <div class="form-row" style="margin-top: 10px;">
                            <input type="time" id="pub-time-5" value="17:05">
                            <input type="time" id="pub-time-6" value="19:02">
                            <input type="time" id="pub-time-7" value="21:07">
                        </div>
                        <div class="help-text">–í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–π –∏–∑ 7 –Ω–æ–≤–æ—Å—Ç–µ–π (–ú–°–ö)</div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="content-tab">
                <div class="form-section">
                    <h3><i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>–ù–æ–≤–æ—Å—Ç–µ–π –≤ –¥–µ–Ω—å</label>
                            <input type="number" id="news-per-day" value="7" min="1" max="20">
                            <div class="help-text">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è —Å–±–æ—Ä–∞</div>
                        </div>
                        <div class="form-group">
                            <label>–ú–∏–Ω. –¥–ª–∏–Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</label>
                            <input type="number" id="min-content" value="50" min="10">
                            <div class="help-text">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–æ–≤–æ—Å—Ç–∏</div>
                        </div>
                        <div class="form-group">
                            <label>–ú–∞–∫—Å. –¥–ª–∏–Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</label>
                            <input type="number" id="max-content" value="1500" max="4000">
                            <div class="help-text">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–æ–≤–æ—Å—Ç–∏</div>
                        </div>
                    </div>
                    <div class="form-section" style="background: white; margin-top: 20px;">
                        <h4 style="margin-bottom: 15px;"><i class="fas fa-images"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h4>
                        <div class="checkbox-group">
                            <input type="checkbox" id="generate-images" checked onchange="toggleImageSettings()">
                            <label for="generate-images"><strong>–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</strong></label>
                        </div>
                        <div class="checkbox-group" style="margin-top: 10px;">
                            <input type="checkbox" id="publish-without-images">
                            <label for="publish-without-images">–ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –µ—Å–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å</label>
                        </div>
                        <div class="help-text">–ï—Å–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é, –Ω–æ–≤–æ—Å—Ç–∏ –±—É–¥—É—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–º</div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="prompts-tab">
                <div class="form-section">
                    <h3><i class="fas fa-robot"></i> –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç Perplexity</h3>
                    <div class="form-group">
                        <textarea id="perplexity-system-prompt" rows="5"></textarea>
                        <div class="help-text">–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Perplexity</div>
                    </div>
                </div>
                <div class="form-section">
                    <h3><i class="fas fa-newspaper"></i> –ü—Ä–æ–º–ø—Ç —Å–±–æ—Ä–∞ –Ω–æ–≤–æ—Å—Ç–µ–π</h3>
                    <div class="form-group">
                        <textarea id="perplexity-collection-prompt" rows="10"></textarea>
                        <div class="help-text">–û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —Å–±–æ—Ä–∞ –Ω–æ–≤–æ—Å—Ç–µ–π</div>
                    </div>
                </div>
                <div class="form-section">
                    <h3><i class="fas fa-palette"></i> –ü—Ä–æ–º–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–∏–∫—Å–æ–≤</h3>
                    <div class="form-group">
                        <textarea id="openai-comic-prompt" rows="8"></textarea>
                        <div class="help-text">–ü—Ä–æ–º–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è 4-–ø–∞–Ω–µ–ª—å–Ω—ã—Ö –∫–æ–º–∏–∫—Å–æ–≤</div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="keys-tab">
                <div class="form-section">
                    <h3><i class="fas fa-shield-alt"></i> API –ö–ª—é—á–∏</h3>
                    <div class="notification warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>–í–Ω–∏–º–∞–Ω–∏–µ: —Ö—Ä–∞–Ω–∏—Ç–µ –∫–ª—é—á–∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ù–µ –¥–µ–ª–∏—Ç–µ—Å—å –∏–º–∏ –ø—É–±–ª–∏—á–Ω–æ.</span>
                    </div>
                    <div class="form-group">
                        <label>Perplexity API Key</label>
                        <input type="password" id="perplexity-key" placeholder="pplx-xxxxxxxxxxxxxxxx">
                        <div class="help-text">–ü–æ–ª—É—á–∏—Ç—å –Ω–∞ perplexity.ai/settings/api</div>
                    </div>
                    <div class="form-group">
                        <label>OpenAI API Key</label>
                        <input type="password" id="openai-key" placeholder="sk-xxxxxxxxxxxxxxxx">
                        <div class="help-text">–ü–æ–ª—É—á–∏—Ç—å –Ω–∞ platform.openai.com/api-keys</div>
                    </div>
                    <div class="form-group">
                        <label>Telegram Bot Token</label>
                        <input type="password" id="telegram-token" placeholder="123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11">
                        <div class="help-text">–ü–æ–ª—É—á–∏—Ç—å —É @BotFather –≤ Telegram</div>
                    </div>
                    <div class="form-group">
                        <label>Telegram Channel ID</label>
                        <input type="text" id="telegram-channel" placeholder="@channel_name –∏–ª–∏ -100123456789">
                        <div class="help-text">ID –∏–ª–∏ @username –∫–∞–Ω–∞–ª–∞</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
        <div class="actions">
            <button class="action-btn btn-primary" onclick="saveConfiguration()">
                <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ
            </button>
            <button class="action-btn btn-secondary" onclick="resetToDefaults()">
                <i class="fas fa-undo"></i> –°–±—Ä–æ—Å–∏—Ç—å
            </button>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="modal" id="newProfileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å</h3>
            </div>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</label>
                <input type="text" id="newProfileName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è">
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" onclick="createProfile()">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>
    
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        let currentConfig = {};
        let currentPrompts = {};
        let profiles = [];
        let currentProfile = 'Pocket Consultant';
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        window.addEventListener('DOMContentLoaded', () => {
            loadConfiguration();
            setupEventListeners();
        });
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –¢–∞–±—ã
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    switchTab(e.target.dataset.tab);
                });
            });
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤
        function switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        async function loadConfiguration() {
            try {
                const response = await fetch('/api/config');
                const data = await response.json();
                
                currentConfig = data.config;
                currentPrompts = data.prompts;
                profiles = data.profiles || ['Pocket Consultant'];
                currentProfile = data.current_profile || 'Pocket Consultant';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä –ø—Ä–æ—Ñ–∏–ª–µ–π
                updateProfileSelector();
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—ã
                populateForms();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é
                if (data.validation) {
                    showValidation(data.validation);
                }
            } catch (error) {
                showNotification('error', '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: ' + error.message);
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π
        function updateProfileSelector() {
            const select = document.getElementById('profileSelect');
            select.innerHTML = '';
            
            profiles.forEach(profile => {
                const option = document.createElement('option');
                option.value = profile;
                option.textContent = profile;
                if (profile === currentProfile) {
                    option.selected = true;
                }
                select.appendChild(option);
            });
        }
        
        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º –¥–∞–Ω–Ω—ã–º–∏
        function populateForms() {
            // Perplexity
            document.getElementById('perplexity-model').value = currentConfig.api_models?.perplexity?.model || 'sonar-deep-research';
            document.getElementById('perplexity-max-tokens').value = currentConfig.api_models?.perplexity?.max_tokens || 8192;
            document.getElementById('perplexity-temperature').value = currentConfig.api_models?.perplexity?.temperature || 0.7;
            document.getElementById('perplexity-top-p').value = currentConfig.api_models?.perplexity?.top_p || 0.9;
            document.getElementById('perplexity-presence-penalty').value = currentConfig.api_models?.perplexity?.presence_penalty || 0;
            document.getElementById('perplexity-frequency-penalty').value = currentConfig.api_models?.perplexity?.frequency_penalty || 0;
            document.getElementById('perplexity-citations').checked = currentConfig.api_models?.perplexity?.return_citations !== false;
            document.getElementById('perplexity-domains').value = (currentConfig.api_models?.perplexity?.search_domain_filter || []).join('\n');
            
            // OpenAI
            document.getElementById('openai-model').value = currentConfig.api_models?.openai?.model || 'dall-e-3';
            updateOpenAIOptions();
            document.getElementById('openai-size').value = currentConfig.api_models?.openai?.image_size || '1024x1024';
            document.getElementById('openai-quality').value = currentConfig.api_models?.openai?.image_quality || 'standard';
            document.getElementById('openai-style').value = currentConfig.api_models?.openai?.image_style || 'vivid';
            
            // –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
            document.getElementById('collection-time').value = currentConfig.schedule?.collection_time || '08:30';
            const pubTimes = currentConfig.schedule?.publication_times || [];
            for (let i = 0; i < 7; i++) {
                const input = document.getElementById(`pub-time-${i+1}`);
                if (input && pubTimes[i]) {
                    input.value = pubTimes[i];
                }
            }
            
            // –ö–æ–Ω—Ç–µ–Ω—Ç
            document.getElementById('news-per-day').value = currentConfig.content?.max_news_per_day || 7;
            document.getElementById('min-content').value = currentConfig.content?.min_content_length || 50;
            document.getElementById('max-content').value = currentConfig.content?.max_content_length || 1500;
            document.getElementById('generate-images').checked = currentConfig.content?.generate_images !== false;
            document.getElementById('publish-without-images').checked = currentConfig.content?.publish_without_images === true;
            
            // –ü—Ä–æ–º–ø—Ç—ã
            document.getElementById('perplexity-system-prompt').value = currentPrompts.perplexity_system || '';
            document.getElementById('perplexity-collection-prompt').value = currentPrompts.perplexity_collection || '';
            document.getElementById('openai-comic-prompt').value = currentPrompts.openai_comic || '';
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–ø—Ü–∏–π OpenAI –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ–¥–µ–ª–∏
        function updateOpenAIOptions() {
            const model = document.getElementById('openai-model').value;
            const sizeSelect = document.getElementById('openai-size');
            const qualitySelect = document.getElementById('openai-quality');
            const styleSelect = document.getElementById('openai-style');
            
            // –û—á–∏—â–∞–µ–º –æ–ø—Ü–∏–∏
            sizeSelect.innerHTML = '';
            qualitySelect.innerHTML = '';
            
            if (model === 'dall-e-2') {
                // DALL-E 2 —Ä–∞–∑–º–µ—Ä—ã
                ['256x256', '512x512', '1024x1024'].forEach(size => {
                    const option = document.createElement('option');
                    option.value = size;
                    option.textContent = size;
                    sizeSelect.appendChild(option);
                });
                
                // –¢–æ–ª—å–∫–æ standard –¥–ª—è DALL-E 2
                qualitySelect.innerHTML = '<option value="standard">Standard</option>';
                styleSelect.disabled = true;
                
            } else if (model === 'dall-e-3') {
                // DALL-E 3 —Ä–∞–∑–º–µ—Ä—ã
                ['1024x1024', '1024x1792', '1792x1024'].forEach(size => {
                    const option = document.createElement('option');
                    option.value = size;
                    option.textContent = size;
                    sizeSelect.appendChild(option);
                });
                
                // Standard –∏ HD –¥–ª—è DALL-E 3
                qualitySelect.innerHTML = `
                    <option value="standard">Standard</option>
                    <option value="hd">HD</option>
                `;
                styleSelect.disabled = false;
                
            } else if (model === 'gpt-image-1') {
                // GPT-Image-1 —Ä–∞–∑–º–µ—Ä—ã
                ['256x256', '512x512', '1024x1024', '2048x2048', '4096x4096'].forEach(size => {
                    const option = document.createElement('option');
                    option.value = size;
                    option.textContent = size;
                    sizeSelect.appendChild(option);
                });
                
                // Low, Medium, High –¥–ª—è GPT-Image-1
                qualitySelect.innerHTML = `
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                `;
                styleSelect.disabled = true;
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        async function saveConfiguration() {
            try {
                // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º
                const config = {
                    api_models: {
                        perplexity: {
                            model: document.getElementById('perplexity-model').value,
                            max_tokens: parseInt(document.getElementById('perplexity-max-tokens').value),
                            temperature: parseFloat(document.getElementById('perplexity-temperature').value),
                            top_p: parseFloat(document.getElementById('perplexity-top-p').value),
                            presence_penalty: parseFloat(document.getElementById('perplexity-presence-penalty').value),
                            frequency_penalty: parseFloat(document.getElementById('perplexity-frequency-penalty').value),
                            return_citations: document.getElementById('perplexity-citations').checked,
                            search_domain_filter: document.getElementById('perplexity-domains').value.split('\n').filter(d => d.trim()),
                            timeout: 300
                        },
                        openai: {
                            model: document.getElementById('openai-model').value,
                            image_size: document.getElementById('openai-size').value,
                            image_quality: document.getElementById('openai-quality').value,
                            image_style: document.getElementById('openai-style').value,
                            response_format: 'url',
                            n_images: 1,
                            timeout: 120
                        }
                    },
                    schedule: {
                        collection_time: document.getElementById('collection-time').value,
                        publication_times: [],
                        timezone: 'Europe/Moscow'
                    },
                    content: {
                        max_news_per_day: parseInt(document.getElementById('news-per-day').value),
                        min_content_length: parseInt(document.getElementById('min-content').value),
                        max_content_length: parseInt(document.getElementById('max-content').value),
                        generate_images: document.getElementById('generate-images').checked,
                        publish_without_images: document.getElementById('publish-without-images').checked,
                        similarity_threshold: 0.7,
                        news_priorities: [
                            "–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û",
                            "–û–ß–ï–ù–¨ –í–ê–ñ–ù–û",
                            "–í–ê–ñ–ù–û",
                            "–°–†–ï–î–ù–Ø–Ø –í–ê–ñ–ù–û–°–¢–¨",
                            "–£–ú–ï–†–ï–ù–ù–ê–Ø –í–ê–ñ–ù–û–°–¢–¨",
                            "–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø",
                            "–ù–ò–ó–ö–ê–Ø –í–ê–ñ–ù–û–°–¢–¨"
                        ]
                    },
                    telegram: currentConfig.telegram || {},
                    storage: currentConfig.storage || {},
                    retry: currentConfig.retry || {},
                    monitoring: currentConfig.monitoring || {}
                };
                
                // –°–æ–±–∏—Ä–∞–µ–º –≤—Ä–µ–º–µ–Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
                for (let i = 1; i <= 7; i++) {
                    const time = document.getElementById(`pub-time-${i}`).value;
                    if (time) {
                        config.schedule.publication_times.push(time);
                    }
                }
                
                // –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–º–ø—Ç—ã
                const prompts = {
                    perplexity_system: document.getElementById('perplexity-system-prompt').value,
                    perplexity_collection: document.getElementById('perplexity-collection-prompt').value,
                    openai_comic: document.getElementById('openai-comic-prompt').value
                };
                
                // –°–æ–±–∏—Ä–∞–µ–º API –∫–ª—é—á–∏ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã)
                const apiKeys = {};
                const perplexityKey = document.getElementById('perplexity-key').value;
                const openaiKey = document.getElementById('openai-key').value;
                const telegramToken = document.getElementById('telegram-token').value;
                const telegramChannel = document.getElementById('telegram-channel').value;
                
                if (perplexityKey && !perplexityKey.includes('*')) {
                    apiKeys.PERPLEXITY_API_KEY = perplexityKey;
                }
                if (openaiKey && !openaiKey.includes('*')) {
                    apiKeys.OPENAI_API_KEY = openaiKey;
                }
                if (telegramToken && !telegramToken.includes('*')) {
                    apiKeys.TELEGRAM_BOT_TOKEN = telegramToken;
                }
                if (telegramChannel) {
                    apiKeys.TELEGRAM_CHANNEL_ID = telegramChannel;
                }
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                const response = await fetch('/api/config', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        config: config,
                        prompts: prompts,
                        api_keys: apiKeys
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showNotification('success', '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å
                    await saveProfile();
                    
                    if (result.validation) {
                        showValidation(result.validation);
                    }
                } else {
                    showNotification('error', '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ' + result.message);
                }
                
            } catch (error) {
                showNotification('error', '–û—à–∏–±–∫–∞: ' + error.message);
            }
        }
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏
        async function loadProfile() {
            const profileName = document.getElementById('profileSelect').value;
            try {
                const response = await fetch('/api/profiles/load', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ profile_name: profileName })
                });
                
                const result = await response.json();
                if (result.success) {
                    currentConfig = result.config;
                    currentPrompts = result.prompts;
                    currentProfile = profileName;
                    populateForms();
                    showNotification('success', `–ü—Ä–æ—Ñ–∏–ª—å "${profileName}" –∑–∞–≥—Ä—É–∂–µ–Ω`);
                } else {
                    showNotification('error', result.message);
                }
            } catch (error) {
                showNotification('error', '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è: ' + error.message);
            }
        }
        
        async function saveProfile() {
            const profileName = document.getElementById('profileSelect').value;
            try {
                const response = await fetch('/api/profiles/save', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ profile_name: profileName })
                });
                
                const result = await response.json();
                if (result.success) {
                    showNotification('success', `–ü—Ä–æ—Ñ–∏–ª—å "${profileName}" —Å–æ—Ö—Ä–∞–Ω–µ–Ω`);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è:', error);
            }
        }
        
        function showNewProfileModal() {
            document.getElementById('newProfileModal').classList.add('active');
        }
        
        function closeModal() {
            document.getElementById('newProfileModal').classList.remove('active');
        }
        
        async function createProfile() {
            const profileName = document.getElementById('newProfileName').value.trim();
            if (!profileName) {
                showNotification('error', '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è');
                return;
            }
            
            try {
                const response = await fetch('/api/profiles/create', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ profile_name: profileName })
                });
                
                const result = await response.json();
                if (result.success) {
                    profiles.push(profileName);
                    currentProfile = profileName;
                    updateProfileSelector();
                    closeModal();
                    showNotification('success', `–ü—Ä–æ—Ñ–∏–ª—å "${profileName}" —Å–æ–∑–¥–∞–Ω`);
                } else {
                    showNotification('error', result.message);
                }
            } catch (error) {
                showNotification('error', '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è: ' + error.message);
            }
        }
        
        async function duplicateProfile() {
            const sourceName = document.getElementById('profileSelect').value;
            const newName = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –∫–æ–ø–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è:', sourceName + ' - –∫–æ–ø–∏—è');
            
            if (!newName || newName.trim() === '') return;
            
            try {
                const response = await fetch('/api/profiles/duplicate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        source_name: sourceName,
                        new_name: newName.trim()
                    })
                });
                
                const result = await response.json();
                if (result.success) {
                    profiles.push(newName.trim());
                    updateProfileSelector();
                    showNotification('success', result.message);
                } else {
                    showNotification('error', result.message);
                }
            } catch (error) {
                showNotification('error', '–û—à–∏–±–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è: ' + error.message);
            }
        }
        
        async function deleteProfile() {
            const profileName = document.getElementById('profileSelect').value;
            
            if (profileName === 'Pocket Consultant') {
                showNotification('error', '–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å');
                return;
            }
            
            if (!confirm(`–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å "${profileName}"?`)) return;
            
            try {
                const response = await fetch('/api/profiles/delete', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ profile_name: profileName })
                });
                
                const result = await response.json();
                if (result.success) {
                    profiles = profiles.filter(p => p !== profileName);
                    currentProfile = 'Pocket Consultant';
                    updateProfileSelector();
                    await loadProfile();
                    showNotification('success', result.message);
                } else {
                    showNotification('error', result.message);
                }
            } catch (error) {
                showNotification('error', '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: ' + error.message);
            }
        }
        
        // –°–±—Ä–æ—Å –∫ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
        async function resetToDefaults() {
            if (!confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º?')) return;
            
            try {
                const response = await fetch('/api/reset', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({})
                });
                
                const result = await response.json();
                if (result.success) {
                    currentConfig = result.config;
                    currentPrompts = result.prompts;
                    populateForms();
                    showNotification('success', '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã –∫ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º');
                } else {
                    showNotification('error', result.message);
                }
            } catch (error) {
                showNotification('error', '–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞: ' + error.message);
            }
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(type, message) {
            const container = document.getElementById('notifications');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icon = type === 'success' ? 'fa-check-circle' : 
                        type === 'error' ? 'fa-times-circle' : 'fa-exclamation-triangle';
            
            notification.innerHTML = `
                <i class="fas ${icon}"></i>
                <span>${message}</span>
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
        function showValidation(validation) {
            const container = document.getElementById('notifications');
            
            if (validation.errors && validation.errors.length > 0) {
                validation.errors.forEach(error => {
                    showNotification('error', '–û—à–∏–±–∫–∞: ' + error);
                });
            }
            
            if (validation.warnings && validation.warnings.length > 0) {
                validation.warnings.forEach(warning => {
                    showNotification('warning', '–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: ' + warning);
                });
            }
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        function toggleImageSettings() {
            const generateImages = document.getElementById('generate-images').checked;
            const publishWithoutImages = document.getElementById('publish-without-images');
            
            if (!generateImages) {
                publishWithoutImages.checked = true;
                publishWithoutImages.disabled = true;
            } else {
                publishWithoutImages.disabled = false;
            }
        }
    </script>
</body>
</html>